"use strict";(()=>{var e={};e.id=668,e.ids=[668],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},1762:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>y,requestAsyncStorage:()=>f,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var s={};a.r(s),a.d(s,{GET:()=>l,PUT:()=>p});var r=a(5419),n=a(9108),i=a(9678),o=a(9247),d=a(7037),u=a(2279);async function l(){try{let e=await o.db.select().from(d.Xd);return Response.json(e,{status:200})}catch(e){return Response.json({message:e.message},{status:400})}}async function p(e){try{let{timeLowThreshold:t,panelLowThreshold:a,panelExhaustThreshold:s}=await e.json();return await o.db.transaction(async e=>{await o.db.update(d.Xd).set({value:t}).where((0,u.eq)(d.Xd.refTitle,"time_low_threshold")),await o.db.update(d.Xd).set({value:a}).where((0,u.eq)(d.Xd.refTitle,"panel_low_threshold")),await o.db.update(d.Xd).set({value:s}).where((0,u.eq)(d.Xd.refTitle,"panel_exhaust_threshold"))}),Response.json("ok",{status:200})}catch(e){return Response.json({message:e.message},{status:400})}}let c=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"C:\\Users\\UserAdmin\\Documents\\GitHub\\nation-gate-frontend\\src\\app\\api\\settings\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:g,staticGenerationBailout:w}=c,v="/api/settings/route";function y(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},9247:(e,t,a)=>{a.d(t,{db:()=>n});var s=a(8363);let r=new(a(5900)).Pool({connectionString:process.env.POSTGRES_URL}),n=(0,s.t)(r)},7037:(e,t,a)=>{a.d(t,{Xd:()=>p,qB:()=>l});var s=a(4330),r=a(6155),n=a(9703),i=a(6664),o=a(7362),d=a(5630);let u=(0,s.ys)("status",["printed","picked"]),l=(0,r.af)("warnings",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),ref:(0,i.fL)("ref").unique(),status:u("status"),createdAt:(0,o.AB)("created_at",{mode:"date"}).defaultNow()}),p=(0,r.af)("settings",{id:(0,n.Vj)("id").defaultRandom().primaryKey(),refTitle:(0,i.fL)("ref_title").unique(),title:(0,i.fL)("title"),description:(0,i.fL)("description"),value:(0,d.uR)("value"),createdAt:(0,o.AB)("created_at",{mode:"date"}).defaultNow()})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,547],()=>a(1762));module.exports=s})();
"use strict";(()=>{var e={};e.id=631,e.ids=[631],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},5209:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>v,originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>q});var a={};r.r(a),r.d(a,{POST:()=>p});var s=r(5419),i=r(9108),n=r(9678),o=r(9247),d=r(7037),u=r(2279);async function p(e){try{let t=await e.json(),r=t?.labels;if(console.log({labels:r}),!r)throw Error("Labels data not found");let a=r.map(e=>e.ref);return await o.db.delete(d.qB).where((0,u.xD)((0,u.d3)(d.qB.ref,a),(0,u.eq)(d.qB.status,"printed"))),await o.db.update(d.qB).set({status:"printed"}).where((0,u.xD)((0,u.d3)(d.qB.ref,a),(0,u.eq)(d.qB.status,"picked"))),Response.json("ok",{status:200})}catch(e){return Response.json({message:e.message},{status:400})}}let l=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/revert/route",pathname:"/api/revert",filename:"route",bundlePath:"app/api/revert/route"},resolvedPagePath:"C:\\Users\\UserAdmin\\Documents\\GitHub\\nation-gate-frontend\\src\\app\\api\\revert\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:v,staticGenerationBailout:q}=l,g="/api/revert/route";function h(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},9247:(e,t,r)=>{r.d(t,{db:()=>i});var a=r(8363);let s=new(r(5900)).Pool({connectionString:process.env.POSTGRES_URL}),i=(0,a.t)(s)},7037:(e,t,r)=>{r.d(t,{Xd:()=>l,qB:()=>p});var a=r(4330),s=r(6155),i=r(9703),n=r(6664),o=r(7362),d=r(5630);let u=(0,a.ys)("status",["printed","picked"]),p=(0,s.af)("warnings",{id:(0,i.Vj)("id").defaultRandom().primaryKey(),ref:(0,n.fL)("ref").unique(),status:u("status"),createdAt:(0,o.AB)("created_at",{mode:"date"}).defaultNow()}),l=(0,s.af)("settings",{id:(0,i.Vj)("id").defaultRandom().primaryKey(),refTitle:(0,n.fL)("ref_title").unique(),title:(0,n.fL)("title"),description:(0,n.fL)("description"),value:(0,d.uR)("value"),createdAt:(0,o.AB)("created_at",{mode:"date"}).defaultNow()})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,547],()=>r(5209));module.exports=a})();
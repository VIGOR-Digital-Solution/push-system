"use strict";(()=>{var e={};e.id=891,e.ids=[891],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5900:e=>{e.exports=require("pg")},3815:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>k,patchFetch:()=>v,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>h});var r={};a.r(r),a.d(r,{POST:()=>p});var s=a(5419),i=a(9108),o=a(9678),n=a(9247),u=a(7037),d=a(2279);async function p(e){try{let t=await e.json(),a=t?.labels;if(console.log({labels:a}),!a)throw Error("Labels data not found");let r=[];if(await Promise.all(a.map(async e=>{let t=e.ref;r.push({ref:t,status:"picked"})})),r){let e=r.map(e=>e.ref);await n.db.update(u.qB).set({status:"picked"}).where((0,d.d3)(u.qB.ref,e))}return Response.json("ok",{status:200})}catch(e){return Response.json({message:e.message},{status:400})}}let c=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/pick/route",pathname:"/api/pick",filename:"route",bundlePath:"app/api/pick/route"},resolvedPagePath:"C:\\Users\\UserAdmin\\Documents\\GitHub\\nation-gate-frontend\\src\\app\\api\\pick\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:g,staticGenerationBailout:h}=c,k="/api/pick/route";function v(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},9247:(e,t,a)=>{a.d(t,{db:()=>i});var r=a(8363);let s=new(a(5900)).Pool({connectionString:process.env.POSTGRES_URL}),i=(0,r.t)(s)},7037:(e,t,a)=>{a.d(t,{Xd:()=>c,qB:()=>p});var r=a(4330),s=a(6155),i=a(9703),o=a(6664),n=a(7362),u=a(5630);let d=(0,r.ys)("status",["printed","picked"]),p=(0,s.af)("warnings",{id:(0,i.Vj)("id").defaultRandom().primaryKey(),ref:(0,o.fL)("ref").unique(),status:d("status"),createdAt:(0,n.AB)("created_at",{mode:"date"}).defaultNow()}),c=(0,s.af)("settings",{id:(0,i.Vj)("id").defaultRandom().primaryKey(),refTitle:(0,o.fL)("ref_title").unique(),title:(0,o.fL)("title"),description:(0,o.fL)("description"),value:(0,u.uR)("value"),createdAt:(0,n.AB)("created_at",{mode:"date"}).defaultNow()})}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,547],()=>a(3815));module.exports=r})();